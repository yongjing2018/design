# 在线系统大数据解决方案
## 背景
在线系统：
    服务于餐饮企业用于品项（食材）库存管理。

基本数据情况：
1. 目前集团数有3000+，其中含有KA集团 10+
2. 集团全国有300+店而且品项（10000+）*供应商（100+），每天的会产生大量的订单（单据）
3. 然后就会涉及到多种单据类型（20种+ 例如：入库单，出库单，直发单，直配单，报损单，盘点出库单）
4. 每个月在200w条，每条记录的字段数（110+），每条记录大小（1K+），建立的索引个数（20+），每个存数据量在1GB+

![集团概况图](./images/集团概况.png "处理流程图")

 名词解释：
 1. 品项： 食材分类，对应sku
 2. 餐饮企业（集团）:有3种类型，强连锁、弱连锁（加盟）、单店，个别连锁店有自己的配送中心
 3. KA集团： 是指核心大用户，门店数在100家以上
 
 ## 当前数据问题
 从上线到使用已经有1年的时间，在数据库中积累了大量的数据，导致数据读取速度非常慢；
 
 ## 问题分析
 1. 分析业务情况
    各个集团的使用都是独立的，可以单独进行管理因此可以针对KA集团和普通集团进行“分而治之”，从集团维度进行垂直分库；
    
 2. 数据使用分析
    数据生成：针对单个集团有点门店数超过300+，每年能够到达2000w条记录以上，以线性递增的方式进行累积；
    数据读取：基本使用的热数据最近3天，温数据最近60天，冷数据1年，冰数据3年，基本3年以前的数据都不用了；
 
 3. 用户活跃分析
    核心大集团基本每月都有大量的订单，普通集团每周有300+近1/10的更替，变成死数据（可以直接冻结然后清理掉）
 
 
 
 
